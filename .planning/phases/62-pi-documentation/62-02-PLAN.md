---
phase: 62-pi-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/ARCHITECTURE.md
  - docs/TROUBLESHOOTING.md
  - docs/DEVELOPMENT.md
autonomous: true
requirements: [DOCS-01]

must_haves:
  truths:
    - "ARCHITECTURE.md mentions pi in the harness list within the system overview diagram"
    - "ARCHITECTURE.md lists pi-specific state keys in state file schema"
    - "ARCHITECTURE.md mentions fd in foundation image contents"
    - "TROUBLESHOOTING.md includes pi in version check npm command examples"
    - "TROUBLESHOOTING.md lists ~/.pi in credential persistence directories"
    - "DEVELOPMENT.md references pi as an existing harness pattern alongside claude/codex/gemini"
  artifacts:
    - path: "docs/ARCHITECTURE.md"
      provides: "Pi in system diagrams, state schema, and foundation contents"
    - path: "docs/TROUBLESHOOTING.md"
      provides: "Pi in auth troubleshooting and credential persistence"
    - path: "docs/DEVELOPMENT.md"
      provides: "Pi as reference harness in development checklist"
  key_links:
    - from: "docs/DEVELOPMENT.md"
      to: "docs/HARNESSES.md"
      via: "Development guide references harness docs for Pi"
    - from: "docs/ARCHITECTURE.md"
      to: "docs/CONFIGURATION.md"
      via: "State schema documents :with-pi key"
---

<objective>
Update the three supporting documentation files (ARCHITECTURE.md, TROUBLESHOOTING.md, DEVELOPMENT.md) to include pi coding agent references.

Purpose: Developers and users consulting architecture, troubleshooting, or development guides must see pi included alongside existing harnesses.
Output: Three updated documentation files with pi references throughout.
</objective>

<execution_context>
@/home/jonasrodrigues/.claude/get-shit-done/workflows/execute-plan.md
@/home/jonasrodrigues/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/60-pi-build-infrastructure/60-01-SUMMARY.md
@.planning/phases/60-pi-build-infrastructure/60-02-SUMMARY.md
@.planning/phases/61-pi-cli-integration/61-01-SUMMARY.md
@docs/ARCHITECTURE.md
@docs/TROUBLESHOOTING.md
@docs/DEVELOPMENT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ARCHITECTURE.md with pi references</name>
  <files>docs/ARCHITECTURE.md</files>
  <action>
Add pi to ARCHITECTURE.md in all relevant locations:

1. **"Last updated" line**: Change to `v3.5.0`

2. **System Overview mermaid diagram** (~line 27): Add "pi" to the Harness node label:
   Change: `Harness[AI Harness<br/>claude/opencode/codex/gemini/vscode]`
   To: `Harness[AI Harness<br/>claude/opencode/codex/gemini/pi/vscode]`

3. **Harness Volume contents** (~line 93): Add @mariozechner/pi-coding-agent to the npm packages list:
   `- /tools/npm - npm global packages (@anthropic-ai/claude-code, @openai/codex, @google/gemini-cli, @mariozechner/pi-coding-agent)`

4. **Foundation Image contents** (~line 73): Add `fd-find` to the system tools or add a note about fd being available. Add after the system tools list:
   `- fd (fd-find with symlink for pi file discovery)`

5. **Data mounts section** (~line 270): Add `~/.pi` to the harness config directories list:
   `- Harness config directories -> Per-harness (e.g., ~/.claude, ~/.codex, ~/.pi)`

6. **State file schema** (~line 394): Add pi state keys:
   ```clojure
   :with-pi false                        ; boolean: Pi coding agent enabled?
   :pi-version nil                       ; string or nil: pinned version
   ```
   Add these after the gemini entries, before :with-gitleaks.

7. **Run phase docker run example** (~line 250): No change needed (generic example).

8. **Namespace table** (~line 310): No change needed (namespaces are generic).

Preserve all existing content. Only add pi where other harnesses are listed.
  </action>
  <verify>
grep -c "pi" docs/ARCHITECTURE.md should return multiple matches. Verify:
- grep "pi-coding-agent" docs/ARCHITECTURE.md shows npm package
- grep "with-pi" docs/ARCHITECTURE.md shows state schema
- grep "fd" docs/ARCHITECTURE.md shows fd in foundation
  </verify>
  <done>ARCHITECTURE.md includes: pi in system overview diagram, pi npm package in volume contents, fd in foundation tools, ~/.pi in data mounts, :with-pi/:pi-version in state schema</done>
</task>

<task type="auto">
  <name>Task 2: Update TROUBLESHOOTING.md with pi references</name>
  <files>docs/TROUBLESHOOTING.md</files>
  <action>
Add pi to TROUBLESHOOTING.md in all relevant locations:

1. **"Last updated" line**: Change to `v3.5.0`

2. **"Version not found" section** (~line 150): Add pi to the npm version check examples:
   ```bash
   # For Pi
   npm view @mariozechner/pi-coding-agent versions
   ```

3. **"Harness command not found" section** (~line 335): Add pi to the PATH verification example. In the `ls -la /tools/npm/bin` comment:
   Change: `# Should show harness binaries (claude, codex, gemini)`
   To: `# Should show harness binaries (claude, codex, gemini, pi)`

4. **"Credentials not persisting" section** (~line 586):
   - Add Pi to the list of directories that should exist: `- Pi: ~/.pi`
   - Add to the verify commands: `ls -la ~/.pi`
   - Add to the mount check grep: `grep -E '\.claude|\.codex|\.gemini|\.pi'`

5. **Volume issues section**: No specific Pi changes needed (generic volume troubleshooting applies).

6. **Common Mistake Checklist** at the bottom (~line 1220): The checklist is generic and applies to Pi as-is. No changes needed.

Do NOT add a Pi-specific authentication troubleshooting section -- Pi has straightforward auth that doesn't need special troubleshooting guidance.
  </action>
  <verify>
grep -c "pi" docs/TROUBLESHOOTING.md should return multiple matches. Verify:
- grep "pi-coding-agent" docs/TROUBLESHOOTING.md shows version check example
- grep "\.pi" docs/TROUBLESHOOTING.md shows credential directory
  </verify>
  <done>TROUBLESHOOTING.md includes: pi in version check examples, pi in harness binaries list, ~/.pi in credential persistence section</done>
</task>

<task type="auto">
  <name>Task 3: Update DEVELOPMENT.md with pi references</name>
  <files>docs/DEVELOPMENT.md</files>
  <action>
Add pi to DEVELOPMENT.md in all relevant locations:

1. **"Last updated" line**: Change to `v3.5.0`

2. **Volume Hash Computation section** (~line 127): Add :with-pi to the example inputs:
   ```clojure
   {:with-claude true
    :claude-version "2.0.22"
    :with-opencode true
    :opencode-version nil
    :with-codex false
    :with-gemini false
    :with-pi false}
   ```

3. **Volume Population npm installation** (~line 163): Add pi to the npm install repeat note:
   `- Repeats for each enabled npm harness (claude, codex, gemini, pi)`

4. **Adding a New Harness section** (~line 219): Update the intro to reference pi as an existing implementation:
   Change: `Follow this checklist to integrate a new harness (e.g., cursor, aider).`
   To: `Follow this checklist to integrate a new harness (e.g., cursor, aider). See the Claude, Codex, Gemini, and Pi integrations as reference implementations.`

5. **Step 4: Config Mounts** (~line 416): Add pi to the config-paths example:
   ```clojure
   [(str home "/.pi") (str home "/.pi")]
   ```

6. **Step 5: Environment Variables** (~line 469): Add PI_CODING_AGENT_DIR and PI_SKIP_VERSION_CHECK to the env-passthrough-keys example:
   ```clojure
   "PI_CODING_AGENT_DIR"
   "PI_SKIP_VERSION_CHECK"
   ```

7. **Submitting Changes checklist** (~line 909): Update the pattern reference:
   Change: `Code follows existing patterns (compare to claude, codex, gemini)`
   To: `Code follows existing patterns (compare to claude, codex, gemini, pi)`

8. **Common Patterns section** (~line 968): No changes needed (patterns are generic).

9. **Questions section** (~line 1005): Update harness list:
   Change: `Review existing integrations (claude, codex, gemini)`
   To: `Review existing integrations (claude, codex, gemini, pi)`

Preserve all existing content. Only add pi where other harnesses are listed.
  </action>
  <verify>
grep -c "pi" docs/DEVELOPMENT.md should return multiple matches. Verify:
- grep "with-pi" docs/DEVELOPMENT.md shows volume hash example
- grep "PI_CODING_AGENT" docs/DEVELOPMENT.md shows env var references
- grep "pi)" docs/DEVELOPMENT.md shows pi added to harness lists
  </verify>
  <done>DEVELOPMENT.md includes: pi in volume hash inputs, pi in npm install note, pi in new harness reference list, ~/.pi in config mounts, PI_* in env passthrough, pi in checklist and questions references</done>
</task>

</tasks>

<verification>
After all tasks complete, verify documentation consistency:

1. ARCHITECTURE.md: `grep -E "(pi|Pi|PI_)" docs/ARCHITECTURE.md` shows pi in diagram, volume, state schema
2. TROUBLESHOOTING.md: `grep -E "(pi|\.pi)" docs/TROUBLESHOOTING.md` shows pi in version check and credentials
3. DEVELOPMENT.md: `grep -E "(pi|Pi|PI_)" docs/DEVELOPMENT.md` shows pi in hash, mounts, env vars, references
4. All six documentation files now include pi -- cross-check with Plan 01's files
</verification>

<success_criteria>
- ARCHITECTURE.md includes pi in system diagram, volume contents, foundation tools (fd), data mounts, and state schema
- TROUBLESHOOTING.md includes pi in version checking, credential persistence, and harness binary discovery
- DEVELOPMENT.md includes pi as a reference implementation in harness integration guide
- No existing content is broken or removed
- "Last updated" tags reflect v3.5.0
</success_criteria>

<output>
After completion, create `.planning/phases/62-pi-documentation/62-02-SUMMARY.md`
</output>
