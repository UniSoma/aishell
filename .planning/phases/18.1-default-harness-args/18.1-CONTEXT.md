# Phase 18.1: Default Harness Arguments in Config - Context

**Gathered:** 2026-01-22
**Status:** Ready for planning

<domain>
## Phase Boundary

Users can specify per-harness default arguments in config.yaml that are automatically applied on every invocation. Arguments are prepended to CLI args so CLI can override. Follows existing config merge behavior with extends key.

</domain>

<decisions>
## Implementation Decisions

### Config structure
- Top-level key in config.yaml (alongside mounts, env, etc.)
- List of strings format per harness:
  ```yaml
  harness_args:
    claude:
      - "--allowedTools"
      - "Edit,Write"
  ```
- Exact match only for harness names (no wildcards)

### Argument merging
- Defaults prepended to CLI args (CLI can override by position)
- Pass both defaults and CLI args to harness; let harness handle duplicate flags
- Show applied defaults only in verbose mode (-v)

### Validation & errors
- Warn on startup if harness_args contains unknown harness name
- Auto-convert string values to single-element list (DX convenience)

### Scope behavior
- Both global (~/.config/aishell/config.yaml) and project (.aishell/config.yaml)
- Follows extends key behavior for merging
- harness_args is fully extendable (per-harness lists concatenate)
- No clearing mechanism — inherited defaults always apply, project can only add

### Claude's Discretion
- Key name choice (harness_args, default_args, or args)
- Whether to add --no-defaults flag for skipping defaults
- Whether to add validate command for checking config
- When validation warnings appear (on any command vs only relevant harness)

</decisions>

<specifics>
## Specific Ideas

- Should feel like a natural extension of existing config.yaml structure
- Auto-convert string to list is a DX convenience — don't force users to use list syntax for single args

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 18.1-default-harness-args*
*Context gathered: 2026-01-22*
