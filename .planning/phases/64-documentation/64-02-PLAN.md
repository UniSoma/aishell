---
phase: 64-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/ARCHITECTURE.md
  - docs/TROUBLESHOOTING.md
  - docs/DEVELOPMENT.md
autonomous: true
requirements: [DOCS-01]

must_haves:
  truths:
    - "ARCHITECTURE.md state schema includes :with-openspec and :openspec-version keys"
    - "ARCHITECTURE.md volume hash inputs include OpenSpec"
    - "ARCHITECTURE.md npm packages list includes @fission-ai/openspec"
    - "TROUBLESHOOTING.md has OpenSpec version troubleshooting entry"
    - "DEVELOPMENT.md volume hash and population sections reference OpenSpec"
    - "All docs updated from v3.5.0 to v3.7.0"
  artifacts:
    - path: "docs/ARCHITECTURE.md"
      provides: "OpenSpec in state schema, volume hash, npm packages"
      contains: "openspec"
    - path: "docs/TROUBLESHOOTING.md"
      provides: "OpenSpec troubleshooting entry"
      contains: "openspec"
    - path: "docs/DEVELOPMENT.md"
      provides: "OpenSpec in volume internals"
      contains: "openspec"
  key_links:
    - from: "docs/ARCHITECTURE.md"
      to: "docs/DEVELOPMENT.md"
      via: "state schema and volume hash"
      pattern: "openspec"
---

<objective>
Update docs/ARCHITECTURE.md, docs/TROUBLESHOOTING.md, and docs/DEVELOPMENT.md to reflect OpenSpec in internal architecture, troubleshooting guidance, and developer documentation.

Purpose: Developers and power users need accurate architecture docs, and users need troubleshooting support for OpenSpec.
Output: Three updated documentation files with OpenSpec references in architecture internals, troubleshooting, and developer guide.
</objective>

<execution_context>
@/home/jonasrodrigues/.claude/get-shit-done/workflows/execute-plan.md
@/home/jonasrodrigues/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/63-core-openspec-integration/63-01-SUMMARY.md
@.planning/phases/63-core-openspec-integration/63-02-SUMMARY.md
@docs/ARCHITECTURE.md
@docs/TROUBLESHOOTING.md
@docs/DEVELOPMENT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ARCHITECTURE.md for OpenSpec</name>
  <files>docs/ARCHITECTURE.md</files>
  <action>
CRITICAL CONTEXT: OpenSpec is NOT a harness. It follows the same harness-keys + harness-npm-packages pattern for volume installation, but it is NOT in the dispatch table, NOT in verify-harness-available, and NOT in docker/run.clj config/key/alias sections.

1. Update "Last updated" from v3.5.0 to v3.7.0.

2. In the "Harness Volume" section, update the npm packages list (~line 94):
   - Change: `- `/tools/npm` - npm global packages (@anthropic-ai/claude-code, @openai/codex, @google/gemini-cli, @mariozechner/pi-coding-agent)`
   - To: `- `/tools/npm` - npm global packages (@anthropic-ai/claude-code, @openai/codex, @google/gemini-cli, @mariozechner/pi-coding-agent, @fission-ai/openspec)`

3. In the "State file schema" section (~line 393-412), add OpenSpec keys to the schema example:
   After the Pi entries, add:
   ```clojure
    :with-openspec false                   ; boolean: OpenSpec tool enabled? (opt-in, not a harness)
    :openspec-version nil                  ; string or nil: pinned version
   ```

4. In the mermaid diagram "Host Machine" subgraph (~line 39), the `Harness` node text should include a note that tools like OpenSpec are also available:
   - Change: `Harness[AI Harness<br/>claude/opencode/codex/gemini/pi/vscode]`
   - To: `Harness[AI Harness/Tools<br/>claude/opencode/codex/gemini/pi/vscode/openspec]`

5. In the "Volume naming" section (~line 97-100), after "Enabled harnesses (which flags passed to build)", add:
   - "Enabled tools (e.g., OpenSpec)"
   The full list should be: Enabled harnesses + enabled tools, harness/tool versions, alphabetically sorted.

6. In the "Data mounts" section (~line 272-274), do NOT add OpenSpec. OpenSpec has no config directory to mount. This is intentional -- it is not a harness.
  </action>
  <verify>
    - grep -c "openspec" docs/ARCHITECTURE.md should return >= 4
    - grep "v3.7.0" docs/ARCHITECTURE.md should match
    - grep "fission-ai" docs/ARCHITECTURE.md should match
  </verify>
  <done>
    ARCHITECTURE.md reflects OpenSpec in state schema, volume npm packages, volume hash inputs, and system diagram.
    OpenSpec clearly identified as a non-harness tool.
    Version bumped to v3.7.0.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update TROUBLESHOOTING.md and DEVELOPMENT.md for OpenSpec</name>
  <files>docs/TROUBLESHOOTING.md, docs/DEVELOPMENT.md</files>
  <action>
**docs/TROUBLESHOOTING.md changes:**

1. Update "Last updated" from v3.5.0 to v3.7.0.

2. In the "Version not found" symptom section (~line 150-179), add OpenSpec to the version check commands:
   ```bash
   # For OpenSpec
   npm view @fission-ai/openspec versions
   ```

3. In the "Harness command not found" section (~line 340-379), add a note at the end:
   ```
   **OpenSpec users:** OpenSpec is not a harness command. Use `openspec` inside the container (via `aishell` shell or any harness session). Verify with:
   ```bash
   aishell
   which openspec
   # Should show /tools/npm/bin/openspec
   ```

4. In the "Common Mistake Checklist" at the bottom (~line 1225-1233), add:
   - `- [ ] If using OpenSpec, you built with `--with-openspec` (it is not included by default)`

**docs/DEVELOPMENT.md changes:**

1. Update "Last updated" from v3.5.0 to v3.7.0.

2. In the "Volume Hash Computation" section (~line 126-148), update the "Inputs" example to include OpenSpec:
   ```clojure
   {:with-claude true
    :claude-version "2.0.22"
    :with-opencode true
    :opencode-version nil  ; treated as "latest"
    :with-codex false
    :with-gemini false
    :with-pi false
    :with-openspec true
    :openspec-version nil}  ; treated as "latest"
   ```

3. In the "Volume Population > npm installation" section (~line 163-167), add OpenSpec:
   After "Repeats for each enabled npm harness (claude, codex, gemini, pi)", change to:
   "Repeats for each enabled npm harness/tool (claude, codex, gemini, pi, openspec)"

4. In the "Adding a New Harness" section, the Step 7 Documentation checklist (~line 545-575) is fine as-is since OpenSpec followed a different pattern (not a full harness). No changes needed here.

5. In the State Schema section (~line 180-188), add OpenSpec keys:
   ```clojure
    :with-openspec false                    ; OpenSpec tool enabled (not a harness)
    :openspec-version nil                   ; OpenSpec pinned version
   ```
  </action>
  <verify>
    - grep -c "openspec" docs/TROUBLESHOOTING.md should return >= 3
    - grep -c "openspec" docs/DEVELOPMENT.md should return >= 4
    - grep "v3.7.0" docs/TROUBLESHOOTING.md should match
    - grep "v3.7.0" docs/DEVELOPMENT.md should match
  </verify>
  <done>
    TROUBLESHOOTING.md has OpenSpec version check and command-not-found guidance.
    DEVELOPMENT.md has OpenSpec in volume hash inputs, population steps, and state schema.
    Both docs version-bumped to v3.7.0.
  </done>
</task>

</tasks>

<verification>
1. All three files (ARCHITECTURE.md, TROUBLESHOOTING.md, DEVELOPMENT.md) mention OpenSpec
2. ARCHITECTURE.md state schema includes :with-openspec and :openspec-version
3. ARCHITECTURE.md npm packages list includes @fission-ai/openspec
4. TROUBLESHOOTING.md has OpenSpec version troubleshooting
5. DEVELOPMENT.md volume hash inputs include OpenSpec
6. Version strings updated from v3.5.0 to v3.7.0
7. OpenSpec consistently described as a non-harness tool
</verification>

<success_criteria>
- ARCHITECTURE.md has OpenSpec in state schema, volume hash, npm packages, and diagram
- TROUBLESHOOTING.md has OpenSpec version check and command guidance
- DEVELOPMENT.md has OpenSpec in volume internals
- All three files reflect v3.7.0
- OpenSpec consistently described as opt-in tool, not a harness
</success_criteria>

<output>
After completion, create `.planning/phases/64-documentation/64-02-SUMMARY.md`
</output>
