---
phase: 64-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - docs/HARNESSES.md
  - docs/CONFIGURATION.md
autonomous: true
requirements: [DOCS-01]

must_haves:
  truths:
    - "README.md mentions --with-openspec as a setup flag"
    - "README.md lists OpenSpec as an available opt-in tool"
    - "HARNESSES.md has an OpenSpec section describing what it is and how to enable it"
    - "CONFIGURATION.md documents --with-openspec and --with-openspec=VERSION flags"
    - "All docs updated from v3.5.0 to v3.7.0"
  artifacts:
    - path: "README.md"
      provides: "OpenSpec mentioned in setup examples and features"
      contains: "--with-openspec"
    - path: "docs/HARNESSES.md"
      provides: "OpenSpec section with purpose, installation, usage"
      contains: "OpenSpec"
    - path: "docs/CONFIGURATION.md"
      provides: "OpenSpec build flag documentation"
      contains: "--with-openspec"
  key_links:
    - from: "README.md"
      to: "docs/HARNESSES.md"
      via: "reference link"
      pattern: "HARNESSES.md"
    - from: "docs/CONFIGURATION.md"
      to: "docs/HARNESSES.md"
      via: "cross-reference"
      pattern: "openspec"
---

<objective>
Update README.md, docs/HARNESSES.md, and docs/CONFIGURATION.md to document OpenSpec as an opt-in development workflow tool available inside containers.

Purpose: Users need to discover, understand, and configure OpenSpec through the primary user-facing documentation.
Output: Three updated documentation files reflecting OpenSpec availability with --with-openspec build flag.
</objective>

<execution_context>
@/home/jonasrodrigues/.claude/get-shit-done/workflows/execute-plan.md
@/home/jonasrodrigues/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/63-core-openspec-integration/63-01-SUMMARY.md
@.planning/phases/63-core-openspec-integration/63-02-SUMMARY.md
@README.md
@docs/HARNESSES.md
@docs/CONFIGURATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md and HARNESSES.md for OpenSpec</name>
  <files>README.md, docs/HARNESSES.md</files>
  <action>
CRITICAL CONTEXT: OpenSpec is NOT a harness. It is an opt-in development workflow tool. No `aishell openspec` subcommand exists. No config mounts, no API key passthrough. It is available inside the container only via the `openspec` command after building with `--with-openspec`.

**README.md changes:**

1. Update the opening description line (line 3) to mention OpenSpec is available as a tool:
   - Change: "Docker sandbox for running AI coding agents (Claude Code, OpenCode, Codex CLI, Gemini CLI, Pi) in ephemeral containers."
   - To: "Docker sandbox for running AI coding agents (Claude Code, OpenCode, Codex CLI, Gemini CLI, Pi) in ephemeral containers, with optional development tools (OpenSpec)."

2. In the "Set up harnesses" section (~line 186-199), add `--with-openspec` to the multiple harnesses example:
   - Add after the Pi line in the single harness block: no change needed (OpenSpec is not a harness, not a standalone command)
   - Add to the "multiple harnesses" combined example: `aishell setup --with-claude --with-opencode --with-codex --with-gemini --with-pi --with-openspec`
   - Add a new "Set up with optional tools" subsection after the version pinning examples:
     ```
     # Set up with optional development tools
     aishell setup --with-claude --with-openspec
     aishell setup --with-claude --with-openspec=1.2.3
     ```

3. In the Features > Power user section (~line 169-179), add a bullet:
   - `- **OpenSpec integration** - Opt-in development workflow tool available inside containers (requires `--with-openspec`)`
   Add this after the Gitleaks integration bullet.

4. In the "Foundation image contents" > "Harness tools" note (~line 527), update:
   - After the existing text about npm packages and binaries, add OpenSpec mention:
   - "Harness tools (npm packages, binaries) are mounted from volumes at `/tools`, not baked into the image. This includes optional tools like OpenSpec when enabled."

**docs/HARNESSES.md changes:**

1. Update "Last updated" from v3.5.0 to v3.7.0.

2. After the Pi section (ends around line 603) and before "## Multi-Container Workflow" (line 605), add a new section:

```markdown
## Additional Tools

### OpenSpec

#### Overview

OpenSpec is an opt-in development workflow tool by Fission AI. Unlike harnesses (Claude, OpenCode, Codex, Gemini, Pi), OpenSpec is NOT a standalone aishell command. It installs into the harness volume and is available inside containers via the `openspec` command.

**Package:** @fission-ai/openspec

#### Installation

Enable OpenSpec at build time:

```bash
# Latest version
aishell setup --with-claude --with-openspec

# Specific version
aishell setup --with-claude --with-openspec=1.2.3
```

**Build steps:**
1. Builds the foundation image -- skipped if cached
2. Creates a harness volume: `aishell-harness-{hash}`
3. Installs the OpenSpec npm package into the volume: `npm install -g @fission-ai/openspec`
4. Mounts the volume read-only at `/tools` in containers

**Updating OpenSpec:**
```bash
aishell update
```

#### Usage

OpenSpec is available inside any container session when enabled:

```bash
# Enter shell and use openspec
aishell
openspec --help

# Or from any harness session
aishell claude
# Inside container: openspec is available on PATH
```

**Note:** There is no `aishell openspec` command. OpenSpec runs inside the container, not as a harness dispatch target.

#### Status Check

Verify OpenSpec is installed:

```bash
aishell check
# Shows OpenSpec installed/not-installed status with version
```
```

3. In the "Running Multiple Harnesses > Building with Multiple Harnesses" section (~line 658-669), add an example with OpenSpec:
   ```
   # All harnesses with OpenSpec
   aishell setup --with-claude --with-opencode --with-codex --with-gemini --with-pi --with-openspec
   ```
  </action>
  <verify>
    - grep -c "openspec" README.md should return >= 3
    - grep -c "OpenSpec" docs/HARNESSES.md should return >= 10
    - grep "v3.7.0" docs/HARNESSES.md should match the "Last updated" line
  </verify>
  <done>
    README.md mentions --with-openspec in setup examples and features list.
    HARNESSES.md has a dedicated OpenSpec section under "Additional Tools" explaining it is not a harness, with installation, usage, and status check instructions.
    Both docs version-bumped to v3.7.0.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update CONFIGURATION.md for OpenSpec build flag</name>
  <files>docs/CONFIGURATION.md</files>
  <action>
1. Update "Last updated" from v3.5.0 to v3.7.0.

2. In the "Setup Options > Harness Selection Flags" section (~line 1008-1048), add OpenSpec:

   a. In the "Available harnesses" list (~line 1029-1033), add after Pi:
      ```
      **Available tools (non-harness):**
      - `--with-openspec` - Fission AI OpenSpec development workflow tool
      ```

   b. In the version pinning example (~line 1035-1039), add:
      ```bash
      --with-openspec=1.2.3
      ```

   c. In the "State tracking" note (~line 1045), ensure the description covers OpenSpec:
      "aishell saves harness selection and tool configuration in `~/.aishell/state.edn` and preserves it across updates."

3. In the "Update Command" section (~line 1136-1140), update the "Preserved from the last build" list:
   Add: `- OpenSpec installation status (`--with-openspec` opt-in)`

4. In the "harness_args" section (~line 587-670), do NOT add OpenSpec. OpenSpec is not a harness and does not have harness_args support. This is intentional.
  </action>
  <verify>
    - grep -c "openspec" docs/CONFIGURATION.md should return >= 3
    - grep "v3.7.0" docs/CONFIGURATION.md should match the "Last updated" line
  </verify>
  <done>
    CONFIGURATION.md documents --with-openspec and --with-openspec=VERSION as opt-in build flags.
    OpenSpec clearly distinguished from harness flags.
    Version bumped to v3.7.0.
  </done>
</task>

</tasks>

<verification>
1. All three files (README.md, docs/HARNESSES.md, docs/CONFIGURATION.md) mention OpenSpec
2. OpenSpec is clearly described as NOT a harness (no `aishell openspec` command)
3. --with-openspec and --with-openspec=VERSION documented
4. Version strings updated from v3.5.0 to v3.7.0
5. No references to `aishell openspec` as a runnable command
</verification>

<success_criteria>
- README.md has --with-openspec in setup examples and OpenSpec in features
- HARNESSES.md has dedicated OpenSpec section under "Additional Tools"
- CONFIGURATION.md documents --with-openspec build flag
- All three files reflect v3.7.0
- OpenSpec consistently described as opt-in tool, not a harness
</success_criteria>

<output>
After completion, create `.planning/phases/64-documentation/64-01-SUMMARY.md`
</output>
