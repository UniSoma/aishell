---
phase: 52-documentation-update
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/HARNESSES.md
  - docs/TROUBLESHOOTING.md
  - docs/DEVELOPMENT.md
autonomous: true

must_haves:
  truths:
    - "HARNESSES documents attach with positional argument syntax (aishell attach <name>)"
    - "HARNESSES multi-container section explains docker exec bash semantics"
    - "HARNESSES has no tmux plugins, resurrect, or --detach examples"
    - "TROUBLESHOOTING has no tmux Issues section"
    - "TROUBLESHOOTING attach issues section reflects docker exec semantics"
    - "No occurrences of --detach, --with-tmux, --session, --shell, resurrect, TPM, or Ctrl+B in either file"
    - "DEVELOPMENT.md has no tmux, --detach, --with-tmux, resurrect, TPM, or WITH_TMUX references"
  artifacts:
    - path: "docs/HARNESSES.md"
      provides: "Harness guide with v3.0.0 multi-container workflow (no tmux)"
    - path: "docs/TROUBLESHOOTING.md"
      provides: "Troubleshooting guide without tmux issues section, updated attach guidance"
    - path: "docs/DEVELOPMENT.md"
      provides: "Development guide already clean of tmux references (verified)"
  key_links:
    - from: "docs/HARNESSES.md"
      to: "docs/TROUBLESHOOTING.md"
      via: "Attach usage in HARNESSES matches error resolution in TROUBLESHOOTING"
---

<objective>
Update HARNESSES.md and TROUBLESHOOTING.md to remove all tmux, detach, resurrect, and TPM references for v3.0.0.

Purpose: These two files are the primary user guides. They must reflect the simplified v3.0.0 model where containers always run foreground-attached, attach opens a bash shell via docker exec, and there is no tmux or detached mode.
Output: Two updated documentation files with v3.0.0 semantics.
</objective>

<execution_context>
@/home/jonasrodrigues/.claude/get-shit-done/workflows/execute-plan.md
@/home/jonasrodrigues/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/52-documentation-update/52-RESEARCH.md
@docs/HARNESSES.md
@docs/TROUBLESHOOTING.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite HARNESSES.md multi-container section for v3.0.0</name>
  <files>docs/HARNESSES.md</files>
  <action>
  Replace the entire "## Detached Mode & tmux" section (from line ~515 through line ~608, ending before whatever section follows "Container Naming") with a new "## Multi-Container Workflow" section.

  The old section includes: "Enabling tmux", "Running in Background", "Reconnecting", "Shell Access", "Listing Containers", "Detaching", "Stopping", "tmux Plugins", and "Container Naming" subsections.

  Replace with:

  ```markdown
  ## Multi-Container Workflow

  Run multiple named containers simultaneously and reconnect to them.

  ### Starting Named Containers

  Each container gets a default name matching its harness (`claude`, `opencode`, `codex`, `gemini`, `shell`). Override with `--name`:

  ```bash
  # Start Claude (default name: claude)
  aishell claude

  # Start a second Claude with a custom name
  aishell claude --name reviewer
  ```

  ### Listing Containers

  ```bash
  # List running containers for current project
  aishell ps
  ```

  ### Attaching to Running Containers

  Open a bash shell in a running container:

  ```bash
  # Attach to a running container by name
  aishell attach claude

  # Attach to a custom-named container
  aishell attach reviewer
  ```

  `aishell attach` runs `docker exec -it <container> bash`, giving you a new shell session inside the running container. The original harness process continues running.

  ### Stopping Containers

  ```bash
  docker stop aishell-<hash>-claude
  ```

  ### Container Naming

  Containers follow the naming pattern `aishell-{project-hash}-{name}`:
  - **project-hash**: First 8 characters of the SHA-256 of your project directory path
  - **name**: Defaults to the harness name (`claude`, `opencode`, `codex`, `gemini`, `shell`); override with `--name`
  ```

  Do NOT change anything above line 515 (the harness-specific sections for Claude, OpenCode, Codex, Gemini) or anything below the Container Naming section.
  </action>
  <verify>
  Run: `grep -n 'tmux\|--detach\|-d \|--with-tmux\|--session\|--shell\|Ctrl+B\|resurrect\|TPM\|detached\|background' docs/HARNESSES.md`
  Expected: No output (no matches).
  Also verify the file contains `## Multi-Container Workflow` and `aishell attach` (updated content).
  </verify>
  <done>
  HARNESSES.md "Detached Mode & tmux" section fully replaced with "Multi-Container Workflow" section using v3.0.0 semantics. No tmux, detach, or session references remain. Attach uses positional argument syntax.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update TROUBLESHOOTING.md for v3.0.0</name>
  <files>docs/TROUBLESHOOTING.md</files>
  <action>
  Make the following targeted edits to docs/TROUBLESHOOTING.md:

  1. **Table of contents (~lines 17-18):**
     - Change `- [Detached Mode & Attach Issues](#detached-mode--attach-issues)` to `- [Attach Issues](#attach-issues)`
     - Remove the line: `- [tmux Issues](#tmux-issues)`

  2. **Section header (~line 804):**
     - Change `## Detached Mode & Attach Issues` to `## Attach Issues`

  3. **Remove tmux note (~line 806):**
     Delete the line: `**Note:** \`aishell attach\` requires tmux, enabled at build time with \`--with-tmux\`. Without tmux, attach shows an error with rebuild instructions.`

  4. **Rewrite "Container name already in use" symptom (~lines 808-830):**
     Change header from `### Symptom: "Container name already in use" when starting detached` to `### Symptom: "Container name already in use" when starting container`

     Update the resolution to remove --detach:
     - Step 3 "Stop and restart": change `aishell claude --detach` to `aishell claude` (no --detach flag)

  5. **Rewrite "container not found" symptom (~lines 832-851):**
     - In "Common issues" list, change `Container exited: restart with \`aishell claude --detach\`` to `Container exited: restart with \`aishell claude\``

  6. **Remove "tmux: open terminal failed" symptom (~lines 853-859):**
     Delete this entire symptom subsection (from `### Symptom: "tmux: open terminal failed: not a terminal"` through the resolution text). This issue no longer applies since attach uses docker exec, not tmux.

  7. **Remove "tmux fails with open terminal failed" symptom (~lines 861-877):**
     Delete this entire symptom subsection. TERM validation still exists in the entrypoint but tmux-specific terminal errors are gone.

  8. **Update "aishell ps shows no containers" symptom (~lines 893-897):**
     - Change `aishell claude --detach` to `aishell claude --name background-task` in the "Start a container" example (or just `aishell claude`).

  9. **Remove entire "## tmux Issues" section (~lines 901-1059):**
     Delete from `## tmux Issues` through the `---` separator that follows it. This removes ALL tmux-specific troubleshooting: "Container does not have tmux enabled", "main session not found", "tmux plugins not loading", "tmux-resurrect not restoring", and "Migration warning keeps appearing".

  10. **Update "Last updated" line (~line 5):**
      Change `**Last updated:** v2.9.0` to `**Last updated:** v3.0.0`

  Do NOT change any other sections (Setup Issues, Container Issues, Volume Issues, Authentication Issues, Sensitive File Detection, Exec Command Issues, Network Issues, Getting Help).
  </action>
  <verify>
  Run: `grep -n 'tmux\|--detach\|--with-tmux\|TPM\|resurrect\|--session\|--shell\|Ctrl+B' docs/TROUBLESHOOTING.md`
  Expected: No output (no matches).
  Also verify the file contains `## Attach Issues` and `## Exec Command Issues` (sections preserved in correct order).
  </verify>
  <done>
  TROUBLESHOOTING.md has no tmux/detach/resurrect/TPM references. TOC updated. "Attach Issues" section rewritten for v3.0.0. Entire "tmux Issues" section removed. All other troubleshooting sections intact.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify DEVELOPMENT.md has no tmux/detach references</name>
  <files>docs/DEVELOPMENT.md</files>
  <action>
  This is a verification-only task. DEVELOPMENT.md was not modified during v3.0.0 phases 46-51 because it contained no tmux or detach references to begin with.

  Read docs/DEVELOPMENT.md and run the grep check below to confirm it has zero tmux/detach references. No edits expected.

  This task exists to formally satisfy success criterion 6: "DEVELOPMENT reflects simplified entrypoint without tmux."
  </action>
  <verify>
  Run: `grep -n 'tmux\|--detach\|--with-tmux\|WITH_TMUX\|resurrect\|TPM' docs/DEVELOPMENT.md`
  Expected: No output (no matches). DEVELOPMENT.md is already clean.
  </verify>
  <done>
  DEVELOPMENT.md confirmed to have zero tmux, detach, resurrect, or TPM references. Success criterion 6 (DOCS-01) formally satisfied.
  </done>
</task>

</tasks>

<verification>
Run across all three files:
```bash
grep -rn 'tmux\|TPM\|resurrect\|--with-tmux\|WITH_TMUX\|--detach\|--session\|--shell\|detached mode\|Ctrl+B' docs/HARNESSES.md docs/TROUBLESHOOTING.md docs/DEVELOPMENT.md
```
Expected: No output. Zero references to removed v3.0.0 features across all three files.
</verification>

<success_criteria>
- Zero occurrences of tmux, TPM, resurrect, --with-tmux, --detach, --session, --shell, or Ctrl+B in docs/HARNESSES.md and docs/TROUBLESHOOTING.md
- HARNESSES.md has "Multi-Container Workflow" section with positional attach syntax
- TROUBLESHOOTING.md has "Attach Issues" section (not "Detached Mode & Attach Issues")
- TROUBLESHOOTING.md has no "tmux Issues" section
- All other troubleshooting sections preserved intact
- DEVELOPMENT.md has zero tmux/detach/resurrect/TPM references (criterion 6 verified)
</success_criteria>

<output>
After completion, create `.planning/phases/52-documentation-update/52-02-SUMMARY.md`
</output>
