---
phase: 52-documentation-update
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - docs/ARCHITECTURE.md
  - docs/CONFIGURATION.md
autonomous: true

must_haves:
  truths:
    - "README features list shows no tmux or detached mode references"
    - "README usage section shows attach with positional argument syntax (aishell attach <name>)"
    - "ARCHITECTURE has no tmux Architecture section"
    - "ARCHITECTURE state schema shows no :with-tmux, :tmux-plugins, or :resurrect-config fields"
    - "ARCHITECTURE entrypoint flow shows direct execution without tmux steps"
    - "CONFIGURATION has no tmux config section or --with-tmux setup section"
    - "No occurrences of --detach, --with-tmux, WITH_TMUX, resurrect, or TPM in any of the three files"
  artifacts:
    - path: "README.md"
      provides: "Updated feature list and usage examples for v3.0.0"
    - path: "docs/ARCHITECTURE.md"
      provides: "Architecture docs without tmux, updated entrypoint flow and state schema"
    - path: "docs/CONFIGURATION.md"
      provides: "Configuration reference without tmux section or --with-tmux flag"
  key_links:
    - from: "README.md"
      to: "docs/ARCHITECTURE.md"
      via: "Feature descriptions must match architecture"
    - from: "docs/CONFIGURATION.md"
      to: "docs/ARCHITECTURE.md"
      via: "State schema must match config options"
---

<objective>
Update README.md, ARCHITECTURE.md, and CONFIGURATION.md to remove all tmux, detach, resurrect, and TPM references for v3.0.0.

Purpose: These three files form the core reference documentation. They must reflect the simplified v3.0.0 model where containers always run foreground-attached and attach uses docker exec bash.
Output: Three updated documentation files with no tmux/detach references.
</objective>

<execution_context>
@/home/jonasrodrigues/.claude/get-shit-done/workflows/execute-plan.md
@/home/jonasrodrigues/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/52-documentation-update/52-RESEARCH.md
@README.md
@docs/ARCHITECTURE.md
@docs/CONFIGURATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md for v3.0.0</name>
  <files>README.md</files>
  <action>
  Make the following targeted edits to README.md:

  1. **Features list (Power user section, ~line 109-119):**
     - Remove the line: `- **Detached mode** - Run harnesses in background with \`--detach\` flag`
     - Change `- **Attach/detach** - Reconnect to running containers via \`aishell attach\`` to `- **Attach** - Open a shell in a running container via \`aishell attach\``
     - Remove the line: `- **tmux integration** - Opt-in tmux support with plugin management and session persistence`

  2. **Setup examples (~line 135-136):**
     - Remove these two lines entirely:
       ```
       # Set up with tmux support
       aishell setup --with-claude --with-tmux
       ```

  3. **Rewrite "Detached mode & multi-container workflow" section (~lines 175-203):**
     Replace the entire section with a "Multi-container workflow" section:
     ```markdown
     ### Multi-container workflow

     Run multiple containers and reconnect later:

     ```bash
     # Start Claude in a second terminal
     aishell claude --name reviewer

     # List running containers for this project
     aishell ps

     # Open a shell in a running container
     aishell attach reviewer

     # Stop a container (use `aishell ps` to find the container name)
     docker stop <container-name>
     ```

     Containers are named `aishell-{project-hash}-{name}`. Use `aishell ps` to discover container names for your project.

     **Conflict detection:** Starting a container with a name already in use by a running container shows an error with guidance. Stopped containers with the same name are auto-removed.
     ```

  4. **Foundation image contents (~line 435):**
     - Change `- htop, sqlite3, sudo, tmux` to `- htop, sqlite3, sudo`

  Do NOT change any other sections.
  </action>
  <verify>
  Run: `grep -n 'tmux\|--detach\|detached mode\|--with-tmux\|Ctrl+B\|--session' README.md`
  Expected: No output (no matches).
  Also verify the file still contains `aishell attach` (the updated version).
  </verify>
  <done>
  README.md has no tmux/detach references. Features list reflects v3.0.0 model. Multi-container workflow section uses positional argument attach syntax. Foundation image contents list excludes tmux.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update ARCHITECTURE.md for v3.0.0</name>
  <files>docs/ARCHITECTURE.md</files>
  <action>
  Make the following targeted edits to docs/ARCHITECTURE.md:

  1. **Architectural principles (~line 61):**
     - Remove the line: `7. **tmux Opt-in:** tmux multiplexer is optional, enabled via \`--with-tmux\` build flag`
     - Renumber remaining principles if needed (there may not be a 7 after this).

  2. **Foundation image contents (~line 77):**
     - Change `- System tools (git, curl, jq, ripgrep, vim, tmux, etc.)` to `- System tools (git, curl, jq, ripgrep, vim, etc.)`

  3. **Profile.d paragraph (~line 126):**
     - Change `` `/etc/profile.d/aishell.sh` lets tmux new-window sessions inherit PATH configuration. `` to `` `/etc/profile.d/aishell.sh` ensures login shells inherit PATH configuration. ``

  4. **Remove v2.8.0 to v2.9.0 migration section (~lines 150-168):**
     Delete the entire block from `**From v2.8.0 to v2.9.0:**` through the `:resurrect-config` line (and the blank line after). This is the section that documents tmux behavior changes, attach command validation, migration warning, and state schema additions for v2.9.0.

  5. **Remove entire tmux Architecture section (~lines 172-257):**
     Delete from `## tmux Architecture` through the line before `## Data Flow` (which starts at ~line 260). Include the `---` separator line before Data Flow. The result should flow from the previous Migration section (v2.7.0 to v2.8.0) directly into `## Data Flow`.

  6. **Update entrypoint flow diagram (~lines 366-379):**
     Replace the 10-step entrypoint with:
     ```
     │ Container Execution                      │
     │ entrypoint.sh:                           │
     │ 1. Create user matching host UID/GID    │
     │ 2. Setup home directory                 │
     │ 3. Run pre_start command (if configured)│
     │ 4. Validate TERM (fallback xterm-256color)│
     │ 5. Execute command via gosu             │
     ```

  7. **Update attach namespace description (~line 435):**
     - Change `| \`aishell.attach\` | Attach command | Reconnect to running containers' tmux sessions |` to `| \`aishell.attach\` | Attach command | Open shell in running containers via docker exec |`

  8. **Update state schema (~lines 512-518):**
     Remove these three lines from the state schema:
     ```
     :with-tmux true                         ; boolean: tmux enabled? (NEW in v2.9.0)
     :tmux-plugins ["tmux-plugins/tmux-sensible"] ; vector: tmux plugins (NEW in v2.9.0)
     :resurrect-config {:enabled true :restore_processes false} ; map: resurrect config (NEW in v2.9.0)
     ```

  Do NOT change any other sections (Data Flow build phase, Config Merge, Extension System, etc.).
  </action>
  <verify>
  Run: `grep -n 'tmux\|TPM\|resurrect\|--with-tmux\|WITH_TMUX\|--detach' docs/ARCHITECTURE.md`
  Expected: No output (no matches).
  Also verify the file still contains `## Data Flow` and `entrypoint.sh` (structure preserved).
  </verify>
  <done>
  ARCHITECTURE.md has no tmux/TPM/resurrect references. Architectural principles updated. Foundation contents updated. Entrypoint flow simplified to 5 steps. State schema cleaned. Attach namespace reflects docker exec semantics.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update CONFIGURATION.md for v3.0.0</name>
  <files>docs/CONFIGURATION.md</files>
  <action>
  Make the following targeted edits to docs/CONFIGURATION.md:

  1. **Table of contents (~line 24):**
     - Remove the line: `  - [tmux](#tmux)`

  2. **Annotated example - TMUX section (~lines 219-229):**
     Remove the entire TMUX block from the annotated example, including the header comment and all tmux/resurrect lines:
     ```
     # =============================================================================
     # TMUX - tmux plugin and session persistence (requires --with-tmux)
     # =============================================================================
     tmux:
       plugins:
         - tmux-plugins/tmux-sensible
         - tmux-plugins/tmux-yank
       resurrect: true
       # Or with options:
       # resurrect:
       #   restore_processes: true
     ```

  3. **Remove entire ### tmux reference section (~lines 836-944):**
     Delete from `### tmux` through the `- aishell silently ignores resurrect config when tmux is disabled` note line. This removes the tmux config key reference, tmux.plugins subsection, and tmux.resurrect subsection.

  4. **Remove entire ### --with-tmux setup section (~lines 1128-1168):**
     Delete from `### --with-tmux` through the last code block in that section (the example workflow ending with `aishell attach --name claude`). Also delete any trailing blank line.

  Do NOT change any other sections (mounts, env, ports, docker_args, pre_start, harness_args, detection, --with-gitleaks, etc.).
  </action>
  <verify>
  Run: `grep -n 'tmux\|TPM\|resurrect\|--with-tmux\|--detach' docs/CONFIGURATION.md`
  Expected: No output (no matches).
  Also verify the file still contains `### detection` and `### --with-gitleaks` (adjacent sections preserved).
  </verify>
  <done>
  CONFIGURATION.md has no tmux/TPM/resurrect references. TOC updated. Annotated example cleaned. tmux config section and --with-tmux setup section removed. All other config sections intact.
  </done>
</task>

</tasks>

<verification>
Run across all three files:
```bash
grep -rn 'tmux\|TPM\|resurrect\|--with-tmux\|WITH_TMUX\|--detach\|detached mode\|Ctrl+B' README.md docs/ARCHITECTURE.md docs/CONFIGURATION.md
```
Expected: No output. Zero references to removed v3.0.0 features across all three files.
</verification>

<success_criteria>
- Zero occurrences of tmux, TPM, resurrect, --with-tmux, WITH_TMUX, --detach, or "detached mode" in README.md, docs/ARCHITECTURE.md, and docs/CONFIGURATION.md
- README features list reflects v3.0.0 (no detach, no tmux)
- README multi-container workflow uses positional attach syntax
- ARCHITECTURE entrypoint flow has 5 steps (no tmux steps)
- ARCHITECTURE state schema has no tmux fields
- CONFIGURATION has no tmux section in TOC, example, or reference
</success_criteria>

<output>
After completion, create `.planning/phases/52-documentation-update/52-01-SUMMARY.md`
</output>
