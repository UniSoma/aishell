# Requirements Archive: v3.0.0 Docker-native Attach

**Archived:** 2026-02-06
**Status:** SHIPPED

This is the archived requirements specification for v3.0.0.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v3.0.0 Requirements

Requirements for Docker-native attach milestone. Removes tmux from containers, simplifies attach to docker exec, adjusts CLI semantics.

### Tmux Removal

- [x] **TMUX-01**: Foundation image built without tmux binary
- [x] **TMUX-02**: `--with-tmux` build flag removed from CLI
- [x] **TMUX-03**: `:with-tmux` and `:tmux-plugins` removed from state schema
- [x] **TMUX-04**: `WITH_TMUX` env var removed from docker run arguments
- [x] **TMUX-05**: tmux config mounting removed (staging, runtime config, `.tmux.conf`)
- [x] **TMUX-06**: TPM and plugin installation removed from volume population
- [x] **TMUX-07**: Volume hash no longer depends on tmux state
- [x] **TMUX-08**: `tmux:` section removed from config schema (plugins, resurrect)
- [x] **TMUX-09**: Resurrect mounts removed from docker run
- [x] **TMUX-10**: Entrypoint simplified — no conditional tmux fork, direct `exec gosu`

### Attach Simplification

- [x] **ATTCH-01**: `aishell attach <name>` runs `docker exec -it <container> bash`
- [x] **ATTCH-02**: `--session` and `--shell` flags removed from attach
- [x] **ATTCH-03**: Attach validates TTY, container existence, and running state
- [x] **ATTCH-04**: Attach takes single positional argument (container name)

### CLI Semantics

- [x] **CLI-01**: `aishell` (no args) creates container named `shell`, runs bash
- [x] **CLI-02**: `aishell <harness>` creates container named `<harness>`
- [x] **CLI-03**: `aishell --name X` creates container named `X` with bash
- [x] **CLI-04**: `aishell <harness> --name X` creates container named `X` with harness
- [x] **CLI-05**: Creation commands error if named container already running
- [x] **CLI-06**: `--detach`/`-d` flag removed from CLI

### Documentation

- [x] **DOCS-01**: All user-facing CLI changes reflected in docs/ (README, ARCHITECTURE, CONFIGURATION, HARNESSES, TROUBLESHOOTING, DEVELOPMENT)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| TMUX-01 | Phase 46 | Complete |
| TMUX-02 | Phase 47 | Complete |
| TMUX-03 | Phase 47 | Complete |
| TMUX-04 | Phase 48 | Complete |
| TMUX-05 | Phase 48 | Complete |
| TMUX-06 | Phase 48 | Complete |
| TMUX-07 | Phase 48 | Complete |
| TMUX-08 | Phase 47 | Complete |
| TMUX-09 | Phase 48 | Complete |
| TMUX-10 | Phase 49 | Complete |
| ATTCH-01 | Phase 50 | Complete |
| ATTCH-02 | Phase 50 | Complete |
| ATTCH-03 | Phase 50 | Complete |
| ATTCH-04 | Phase 50 | Complete |
| CLI-01 | Phase 51 | Complete |
| CLI-02 | Phase 51 | Complete |
| CLI-03 | Phase 51 | Complete |
| CLI-04 | Phase 51 | Complete |
| CLI-05 | Phase 51 | Complete |
| CLI-06 | Phase 51 | Complete |
| DOCS-01 | Phase 52 | Complete |

**Coverage:**
- v3.0.0 requirements: 21 total
- Mapped to phases: 21
- Unmapped: 0

---

## Milestone Summary

**Shipped:** 21 of 21 v3.0.0 requirements
**Adjusted:** None — all requirements shipped as originally specified
**Dropped:** None

---
*Archived: 2026-02-06 as part of v3.0.0 milestone completion*
